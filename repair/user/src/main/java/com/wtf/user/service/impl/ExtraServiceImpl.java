package com.wtf.user.service.impl;import com.google.common.collect.Lists;import com.wtf.user.entity.po.UserPO;import com.wtf.user.entity.vo.GoodServiceManVO;import com.wtf.user.entity.vo.StatusCountVO;import com.wtf.user.service.ExtraService;import com.wtf.user.service.UserService;import com.wtf.user.service.other.IServiceFeign;import com.wtf.user.util.ResponseEntity;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import org.springframework.util.CollectionUtils;import java.util.List;/** * @author wangtengfei * @since 2020/4/27 20:53 */@Servicepublic class ExtraServiceImpl implements ExtraService {	@Autowired	private IServiceFeign iServiceFeign;	@Autowired	private UserService userService;	@Override	public List<GoodServiceManVO> getAllStatusCount(Integer status) {		ResponseEntity<List<StatusCountVO>> responseEntity = iServiceFeign.getStatusCount(status);		List<GoodServiceManVO> goodServiceManVOS = Lists.newArrayList();		if (responseEntity != null&& !CollectionUtils.isEmpty(responseEntity.getData())) {			List<StatusCountVO> list = responseEntity.getData();			list.forEach(x -> {				UserPO user = userService.verifyAcc(x.getAccount());				if (user != null) {					GoodServiceManVO goodServiceManVO = new GoodServiceManVO();					goodServiceManVO.setAccount(user.getAccount());					goodServiceManVO.setSex(user.getSex());					goodServiceManVO.setName(user.getSurname() + user.getName());					goodServiceManVO.setPhone(user.getPhone());					goodServiceManVO.setCreateTime(user.getCreateTime());					goodServiceManVO.setCount(x.getStatusCount());					goodServiceManVO.setStatus(x.getStatus());					goodServiceManVOS.add(goodServiceManVO);				}			});		}		return goodServiceManVOS;	}}