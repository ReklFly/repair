package com.wtf.user.config;import com.alibaba.fastjson.JSONObject;import com.wtf.user.util.HttpSender;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.redis.core.RedisTemplate;import org.springframework.scheduling.annotation.Scheduled;import org.springframework.stereotype.Component;import java.util.Map;/** * @author wangtengfei * @since 2020/4/10 11:50 */@Componentpublic class TimeTask {    @Autowired    HttpSender httpSender;    @Autowired    RedisTemplate redisTemplate;    @Scheduled(cron="0 0/90 * * * ?")    public String getWxToken() {        String url="https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential";        String appId="&appid=wx6751e9395d9cd089";        String secret="&secret=0530b19a7a2d703e0db634f7124759a8";        Map<String,String> map= JSONObject.parseObject(httpSender.sendGet(url,appId+secret),Map.class);//        redisTemplate.delete("wx-token");        redisTemplate.opsForValue().set("wx-token",map.get("access_token"));//        System.out.println(redisTemplate.opsForValue().get("wx-token").toString());        return redisTemplate.opsForValue().get("wx-token").toString();    }}